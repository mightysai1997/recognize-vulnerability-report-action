import {expect, it, describe, jest} from '@jest/globals'
import { createPrComment } from '../../src/output/pr-comment';

describe('pr-comment', () => {
    it('should perform an API call to create a comment', async () => {
        const fn = jest.fn()

        const github = {
            rest: {
                issues: {
                    createComment: fn,
                }
            }
        }

        const body = 'Hello world'
        createPrComment(github as any, 1, 'recognizegroup', 'recognize-vulnerability-report-action', body)

        expect(fn).toBeCalledWith({
            issue_number: 1,
            owner: 'recognizegroup',
            repo: 'recognize-vulnerability-report-action',
            body
        })
    })
})